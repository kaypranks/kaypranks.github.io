<script>
const webhookUrl = "https://discord.com/api/webhooks/1446998835229626412/aL3byydfp-9STVBzdf8SMsAiTASlJFHxQrjts7rttPgGlhcCvNE1adAd2ESDJd5qdS4B"; 

// Device / OS / Browser detection
function getDeviceType() {
  const ua = navigator.userAgent;
  if (/mobile/i.test(ua)) return "Mobile";
  if (/tablet/i.test(ua)) return "Tablet";
  return "Desktop";
}
function getOS() {
  const ua = navigator.userAgent;
  if (ua.includes("Win")) return "Windows";
  if (ua.includes("Mac")) return "macOS";
  if (ua.includes("Linux")) return "Linux";
  if (/Android/i.test(ua)) return "Android";
  if (/iPhone|iPad/i.test(ua)) return "iOS";
  return "Unknown";
}
function getBrowser() {
  const ua = navigator.userAgent;
  if (ua.includes("Chrome")) return "Chrome";
  if (ua.includes("Safari") && !ua.includes("Chrome")) return "Safari";
  if (ua.includes("Firefox")) return "Firefox";
  if (ua.includes("Edg")) return "Edge";
  return "Unknown";
}

// STEP 1: Get IPv4 only
fetch("https://api64.ipify.org?format=json")
  .then(res => res.json())
  .then(ipData => {
    const ipv4 = ipData.ip;

    // STEP 2: Use IPv4 to get country, city, region, ISP
    fetch(`https://ipwho.is/${ipv4}`)
      .then(res => res.json())
      .then(geo => {

        const payload = {
          content: "ðŸŒ New visitor on your site!",
          embeds: [
            {
              title: "Visitor IPv4 Details",
              color: 5814783,
              fields: [
                { name: "IPv4", value: ipv4 },
                { name: "Country", value: geo.country || "Unknown", inline: true },
                { name: "Region", value: geo.region || "Unknown", inline: true },
                { name: "City", value: geo.city || "Unknown", inline: true },
                { name: "ISP", value: geo.connection?.isp || "Unknown" },
                { name: "Device", value: getDeviceType(), inline: true },
                { name: "OS", value: getOS(), inline: true },
                { name: "Browser", value: getBrowser(), inline: true }
              ]
            }
          ]
        };

        fetch(webhookUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });
      });
  })
  .catch(err => console.error("IPv4 Error:", err));
</script>
